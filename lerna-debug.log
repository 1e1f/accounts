lerna(verbose) GitUtilities.isInitialized    ()
lerna(verbose) GitUtilities.isInitialized    () => true
lerna(verbose) GitUtilities.getTopLevelDirectory()
lerna(verbose) GitUtilities.getTopLevelDirectory() => "."
lerna(verbose) FileSystemUtilities.existsSync("./lerna.json")
lerna(verbose) FileSystemUtilities.existsSync("./lerna.json") => true
lerna(verbose) FileSystemUtilities.readFileSync("./lerna.json")
lerna(verbose) FileSystemUtilities.readFileSync("./lerna.json") => "{\n  \"lerna\": \"2.0.0-beta.32\",\n  \"packages\": [\n    \"packages/*\"\n  ],\n  \"version\": \"0.0.1\"\n}"
lerna(verbose) FileSystemUtilities.existsSync("./package.json")
lerna(verbose) FileSystemUtilities.existsSync("./package.json") => true
lerna(verbose) FileSystemUtilities.readFileSync("./package.json")
lerna(verbose) FileSystemUtilities.readFileSync("./package.json") => "{\n  \"name\": \"@accounts/accounts\",\n  \"version\": \"0.0.1\",\n  \"description\": \"Fullstack authentication and accounts-management\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/js-accounts/accounts\"\n  },\n  \"keywords\": [\n    \"rest\",\n    \"graphql\",\n    \"passport\",\n    \"grant\",\n    \"auth\",\n    \"authentication\",\n    \"accounts\",\n    \"users\"\n  ],\n  \"author\": \"Gadi Cohen & Tim Mikeladze\",\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"lerna\": \"2.0.0-beta.32\"\n  }\n}"
lerna(info)    Lerna v2.0.0-beta.32
lerna(verbose) FileSystemUtilities.existsSync("./package.json")
lerna(verbose) FileSystemUtilities.existsSync("./package.json") => true
lerna(verbose) FileSystemUtilities.existsSync("./lerna.json")
lerna(verbose) FileSystemUtilities.existsSync("./lerna.json") => true
lerna(verbose) FileSystemUtilities.existsSync("./VERSION")
lerna(verbose) FileSystemUtilities.existsSync("./VERSION") => false
lerna(verbose) FileSystemUtilities.existsSync("./packages/client/package.json")
lerna(verbose) FileSystemUtilities.existsSync("./packages/client/package.json") => true
lerna(verbose) FileSystemUtilities.existsSync("./packages/common/package.json")
lerna(verbose) FileSystemUtilities.existsSync("./packages/common/package.json") => true
lerna(verbose) FileSystemUtilities.existsSync("./packages/server/package.json")
lerna(verbose) FileSystemUtilities.existsSync("./packages/server/package.json") => true
lerna(verbose) Attempting running RunCommand.initialize
lerna(verbose) Successfully ran RunCommand.initialize
lerna(verbose) Attempting running RunCommand.execute
lerna(verbose) NpmUtilities.runScriptInDir   ("testonly", [], "./packages/client")
lerna(verbose) NpmUtilities.execInDir        ("run testonly", [], "./packages/client")
lerna(verbose) NpmUtilities.runScriptInDir   ("testonly", [], "./packages/common")
lerna(verbose) NpmUtilities.execInDir        ("run testonly", [], "./packages/common")
lerna(verbose) NpmUtilities.runScriptInDir   ("testonly", [], "./packages/server")
lerna(verbose) NpmUtilities.execInDir        ("run testonly", [], "./packages/server")
lerna(verbose) NpmUtilities.execInDir        ("run testonly", [], "./packages/common") => "\n> @accounts/common@0.0.1 testonly ./packages/common\n> jest\n\n"
lerna(verbose) NpmUtilities.runScriptInDir   ("testonly", [], "./packages/common") => "\n> @accounts/common@0.0.1 testonly ./packages/common\n> jest\n\n"
lerna(info)    
> @accounts/common@0.0.1 testonly /Users/tim/workspace/js-accounts/accounts/packages/common
> jest


lerna(error)   NpmUtilities.execInDir        ("run testonly", [], "./packages/client")
    Error: Command failed: npm run testonly 
     FAIL  src/AccountsClient.spec.js
      ● Accounts › createUser › requires password
    
        TypeError: _context2.t0.serialize is not a function
          
          at _callee2$ (src/AccountsClient.spec.js:83:54)
          at tryCatch (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:64:40)
          at GeneratorFunctionPrototype.invoke [as _invoke] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:355:22)
          at GeneratorFunctionPrototype.prototype.(anonymous function) [as throw] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:116:21)
          at step (src/AccountsClient.spec.js:4:444)
          at src/AccountsClient.spec.js:4:643
          at run (node_modules/core-js/modules/es6.promise.js:87:22)
          at node_modules/core-js/modules/es6.promise.js:100:28
          at flush (node_modules/core-js/modules/_microtask.js:18:9)
          at _combinedTickCallback (internal/process/next_tick.js:67:7)
    
      ● Accounts › createUser › requires username or an email
    
        TypeError: _context3.t0.serialize is not a function
          
          at _callee3$ (src/AccountsClient.spec.js:99:54)
          at tryCatch (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:64:40)
          at GeneratorFunctionPrototype.invoke [as _invoke] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:355:22)
          at GeneratorFunctionPrototype.prototype.(anonymous function) [as throw] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:116:21)
          at step (src/AccountsClient.spec.js:4:444)
          at src/AccountsClient.spec.js:4:643
          at run (node_modules/core-js/modules/es6.promise.js:87:22)
          at node_modules/core-js/modules/es6.promise.js:100:28
          at flush (node_modules/core-js/modules/_microtask.js:18:9)
          at _combinedTickCallback (internal/process/next_tick.js:67:7)
    
      ● Accounts › createUser › calls callback on succesfull user creation
    
        TypeError: (0 , _common.validatePassword) is not a function
          
          at AccountsClient._callee2$ (src/AccountsClient.js:120:72)
          at tryCatch (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:64:40)
          at GeneratorFunctionPrototype.invoke [as _invoke] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:355:22)
          at GeneratorFunctionPrototype.prototype.(anonymous function) [as next] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:116:21)
          at step (src/AccountsClient.js:20:412)
          at src/AccountsClient.js:20:642
          at new Promise (node_modules/core-js/modules/es6.promise.js:191:7)
          at AccountsClient.<anonymous> (src/AccountsClient.js:20:323)
          at AccountsClient.createUser (src/AccountsClient.js:139:255)
          at Object.createUser (src/AccountsClient.js:217:26)
    
      ● Accounts › createUser › calls callback on failure with error message
    
        expect(received).toEqual(expected)
        
        Expected value to equal:
          1
        Received:
          0
          
          at _callee5$ (src/AccountsClient.spec.js:133:50)
          at tryCatch (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:64:40)
          at GeneratorFunctionPrototype.invoke [as _invoke] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:355:22)
          at GeneratorFunctionPrototype.prototype.(anonymous function) [as throw] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:116:21)
          at step (src/AccountsClient.spec.js:4:444)
          at src/AccountsClient.spec.js:4:643
          at run (node_modules/core-js/modules/es6.promise.js:87:22)
          at node_modules/core-js/modules/es6.promise.js:100:28
          at flush (node_modules/core-js/modules/_microtask.js:18:9)
          at _combinedTickCallback (internal/process/next_tick.js:67:7)
    
      ● Accounts › createUser › calls login function with user id and password of created user
    
        TypeError: (0 , _common.validatePassword) is not a function
          
          at AccountsClient._callee2$ (src/AccountsClient.js:120:72)
          at tryCatch (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:64:40)
          at GeneratorFunctionPrototype.invoke [as _invoke] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:355:22)
          at GeneratorFunctionPrototype.prototype.(anonymous function) [as next] (node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js:116:21)
          at step (src/AccountsClient.js:20:412)
          at src/AccountsClient.js:20:642
          at new Promise (node_modules/core-js/modules/es6.promise.js:191:7)
          at AccountsClient.<anonymous> (src/AccountsClient.js:20:323)
          at AccountsClient.createUser (src/AccountsClient.js:139:255)
          at Object.createUser (src/AccountsClient.js:217:26)
    
      Accounts
        config
          ✓ requires a transport (3ms)
          ✓ sets the transport (3ms)
        createUser
          ✓ requires user object (2ms)
          ✕ requires password (2ms)
          ✕ requires username or an email (1ms)
          ✕ calls callback on succesfull user creation
          ✕ calls callback on failure with error message (2ms)
          ✕ calls login function with user id and password of created user (1ms)
        loginWithPassword
          ✓ throws error if password is undefined (1ms)
          ✓ throws error if user is undefined
          ✓ throws error user is not a string or is an empty object (2ms)
          ✓ throws error password is not a string (1ms)
          ✓ calls callback on successful login (2ms)
          ✓ calls transport (1ms)
          ✓ calls callback with error on failed login (1ms)
          ✓ stores tokens in local storage (1ms)
          ✓ stores user in redux (1ms)
        logout
          ✓ calls callback on successful logout (1ms)
          ✓ calls onLogout on successful logout
          ✓ calls callback on failure with error message (1ms)
        refreshSession
          ✓ clears tokens and user if tokens are not set (1ms)
          ✓ clears tokens, users and throws error if bad refresh token provided (1ms)
    
    Test Suites: 1 failed, 1 total
    Tests:       5 failed, 17 passed, 22 total
    Snapshots:   0 total
    Time:        0.581s, estimated 1s
    Ran all test suites.
    
    npm ERR! Darwin 15.4.0
    npm ERR! argv "/Users/tim/.nvm/versions/node/v6.1.0/bin/node" "/Users/tim/.nvm/versions/node/v6.1.0/bin/npm" "run" "testonly"
    npm ERR! node v6.1.0
    npm ERR! npm  v3.8.6
    npm ERR! code ELIFECYCLE
    npm ERR! @accounts/client@0.0.1 testonly: `jest`
    npm ERR! Exit status 1
    npm ERR! 
    npm ERR! Failed at the @accounts/client@0.0.1 testonly script 'jest'.
    npm ERR! Make sure you have the latest version of node.js and npm installed.
    npm ERR! If you do, this is most likely a problem with the @accounts/client package,
    npm ERR! not with npm itself.
    npm ERR! Tell the author that this fails on your system:
    npm ERR!     jest
    npm ERR! You can get information on how to open an issue for this project with:
    npm ERR!     npm bugs @accounts/client
    npm ERR! Or if that isn't available, you can get their info via:
    npm ERR!     npm owner ls @accounts/client
    npm ERR! There is likely additional logging output above.
    
    npm ERR! Please include the following file with any support request:
    npm ERR!     /Users/tim/workspace/js-accounts/accounts/packages/client/npm-debug.log
    
        at ChildProcess.exithandler (child_process.js:202:12)
        at emitTwo (events.js:106:13)
        at ChildProcess.emit (events.js:191:7)
        at maybeClose (internal/child_process.js:850:16)
        at Socket.<anonymous> (internal/child_process.js:323:11)
        at emitOne (events.js:96:13)
        at Socket.emit (events.js:188:7)
        at Pipe._handle.close [as _onclose] (net.js:492:12)
lerna(error)   NpmUtilities.runScriptInDir   ("testonly", [], "./packages/client")
lerna(info)    
> @accounts/client@0.0.1 testonly /Users/tim/workspace/js-accounts/accounts/packages/client
> jest


lerna(error)   Errored while running npm script 'testonly' in '@accounts/client'
lerna(error)   Errored while running RunCommand.execute
